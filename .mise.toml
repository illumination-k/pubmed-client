[tools]
pre-commit = "latest"
dprint = "latest"
"cargo:cargo-nextest" = "latest"
"cargo:cargo-llvm-cov" = "latest"

[tasks.fmt]
run = [
  "dprint fmt",
  "cargo fmt --all",
]

[tasks.lint]
run = [
  "dprint check",
  "cargo fmt --all -- --check",
  "cargo clippy --all-targets --all-features -- -D warnings",
]

[tasks.test]
run = [
  "cargo nextest run --all-features",
]

[tasks."test:watch"]
run = [
  "cargo watch -x 'nextest run --all-features'",
]

[tasks."test:verbose"]
run = [
  "cargo nextest run --all-features --nocapture",
]

[tasks.build]
run = ["cargo build"]

[tasks.check]
run = ["cargo check"]

[tasks.doc]
run = ["cargo doc --open"]

[tasks.coverage]
run = [
  "cargo llvm-cov nextest --all-features --html",
]

[tasks."coverage:lcov"]
run = [
  "cargo llvm-cov nextest --all-features --lcov --output-path coverage.lcov",
]

[tasks."coverage:json"]
run = [
  "cargo llvm-cov nextest --all-features --json --output-path coverage.json",
]

[tasks."coverage:open"]
run = [
  "cargo llvm-cov nextest --all-features --html --open",
]
