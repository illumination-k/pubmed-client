# Loaded with MISE_ENV=root
# Repository infrastructure tools: formatting, linting, CI auditing
# Used by: lint.yml, and local development

[tools]
prek = "latest"
dprint = "latest"
shfmt = "3"
actionlint = "1.7.7"
"pipx:zizmor" = "1.9.0"
shellcheck = "0.10.0"
"aqua:suzuki-shunsuke/ghalint" = "1.4.1"
"aqua:suzuki-shunsuke/pinact" = "3.3.0"

# ── Format tasks ──────────────────────────────────────────────────────────────

[tasks."fmt:root"]
description = "Format Rust code (dprint + cargo fmt + pinact)"
run = ["mise fmt", "dprint fmt"]

[tasks."fmt:sh"]
description = "Format shell scripts with shfmt"
run = ["shfmt -w ./**/*.sh"]

[tasks."lint:root"]
description = "Lint Rust and GitHub Actions (dprint, clippy, actionlint, ghalint, zizmor)"
run = ["actionlint", "ghalint run", "zizmor .", "dprint check"]
