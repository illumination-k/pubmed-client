# Assets Directory

This directory contains test data and assets for the pubmed-client-rs project.

## Structure

```
assets/
├── README.md                     # This file
└── test_data/
    └── pmc_articles/             # PMC article test data
        ├── PMC10118017/          # Working example with proper figure extraction
        ├── PMC10487465/          # Figures in floats-group with xlink:href
        ├── PMC10802347/          # Additional test case
        ├── PMC1064083/           # Figures without xlink:href attributes
        ├── PMC1174970/           # Corrupted/incomplete XML file
        ├── PMC1175969/           # Figure references but no fig elements
        └── PMC11286954/          # Another working example
```

## PMC Article Test Cases

### PMC10487465 ✅ **Working Example**

- **Description**: Figures in `<floats-group>` section with proper xlink:href attributes
- **Expected Figures**: 8 figures (ijms-24-13282-f001 through ijms-24-13282-f008)
- **Use Case**: Standard modern PMC article with proper figure definitions
- **Test Coverage**: Enhanced parser with floats-group extraction

### PMC1064083 ⚠️ **Edge Case**

- **Description**: Figure elements exist but without xlink:href attributes
- **Expected Figures**: 0 (cannot extract file names without href)
- **Use Case**: Older PMC format where figures lack file references
- **Test Coverage**: Graceful handling of missing xlink:href

### PMC1175969 ⚠️ **Edge Case**

- **Description**: Article has figure references in text but no actual `<fig>` elements
- **Expected Figures**: 0 (no figure definitions in XML)
- **Use Case**: PMC articles where figures are stored separately
- **Test Coverage**: Parser robustness with missing figure elements

### PMC1174970 ❌ **Corrupted**

- **Description**: Incomplete/corrupted XML file (only 4 lines)
- **Expected Figures**: 0 (file cannot be properly parsed)
- **Use Case**: Error handling for malformed input
- **Test Coverage**: Graceful degradation on corrupted files

### PMC10118017 ✅ **Working Example**

- **Description**: Additional working example with proper figure extraction
- **Expected Figures**: 3 figures
- **Use Case**: Validation of parser consistency across different articles
- **Test Coverage**: Cross-validation of figure extraction logic

### PMC11286954 ✅ **Working Example**

- **Description**: Modern PMC article with proper figure structure
- **Expected Figures**: 5 figures (including additional figures)
- **Use Case**: Recent PMC format validation
- **Test Coverage**: Latest PMC XML format compatibility

## Usage in Tests

These assets are used by the parameterized test suite in:

- `tests/integration/test_pmc_variants_parameterized.rs`
- `tests/integration/test_nxml_reading.rs`

The test suite validates:

1. **Parser robustness** across different PMC XML formats
2. **Figure extraction accuracy** for various scenarios
3. **Error handling** for malformed or incomplete files
4. **Backwards compatibility** with older PMC formats

## File Types

Each PMC directory typically contains:

- `*.nxml` - NXML format scientific article XML
- `*.pdf` - PDF version of the article
- `*.gif`, `*.jpg` - Figure images in various formats
- `*_figures_metadata.json` - Extracted figure metadata (generated by our tools)
- `PMC*_*.jpg`, `PMC*_*.gif` - Extracted and renamed figures (generated by our tools)

## Adding New Test Cases

To add new PMC test cases:

1. Copy the PMC directory to `assets/test_data/pmc_articles/`
2. Update the parameterized tests to include the new case
3. Document the expected behavior and figure count
4. Ensure the new case covers a unique scenario not already tested

## Note on File Sources

All PMC articles are publicly available scientific content from PubMed Central, an open access repository of biomedical and life sciences literature. These files are used solely for testing the XML parsing and figure extraction functionality of this library.
